<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>JSON-LD</title>
        <script src= http://cdnjs.cloudflare.com/ajax/libs/jsonld/0.2.13/jsonld.js></script>
        <script src=https://code.jquery.com/jquery-2.1.1.min.js></script>

        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <div>JSON-LD</div>


        <script type="text/javascript">
            var context = {
                "name": "http://fedora.info/definitions/v4/repository"
            };

            $.ajax({
                type: 'GET',
                url: "../fedora/rest/de/uni-heidelberg/ub/digi/diglit/lehmann1756/0001/",
                headers: {
                    'Accept': 'application/ld+json'
                },
                success: function(data) {
                    console.log(data,data);
                    jsonld.compact(data, context, function(err, compacted) {
                        console.log(JSON.stringify(compacted, null, 2));
                    });
                    jsonld.processContext(null, [null, context], function(err, ctx) {
                        if (err) {
                            console.log('error', err);
                            return;
                        }
                        var value = jsonld.getContextValue(ctx, 'name:#created', '@value');
                        console.log('value' , ctx);
                        //console.log('users', data[0]['http://fedora.info/definitions/v4/repository#created'][0]['@value']);
                    });
                }
            });
            var data2 = {
                "@context": {
                    "onto": "http://example.com/onto#",
                    "users": {"@id": "onto:users", "@type": "@id"}
                },
                "users": "http://example.com/users"
            };
            jsonld.processContext(null, [null, data2['@context']], function(err, ctx) {
                if (err) {
                    console.log('error', err);
                    return;
                }
                var value = jsonld.getContextValue(ctx, 'users', '@id');
                //console.log('users', value);
            });

        </script>
    </body>
</html>
